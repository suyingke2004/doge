# 测试用例：任务二 - RAG知识库建设

## 1. 文本处理测试

-   **用例1.1：文本加载**
    -   **前置条件**：在 `knowledge_base/sources` 文件夹中放入一个 `.txt` 和一个 `.md` 文件。
    -   **操作**：运行文本处理脚本 (`scripts/process_texts.py`)。
    -   **预期结果**：脚本能够成功读取并加载两种格式的文件的内容，没有出现乱码或读取错误。

-   **用例1.2：文本分割**
    -   **前置条件**：一篇包含多个段落的长篇文章。
    -   **操作**：运行文本处理脚本进行文本分割。
    -   **预期结果**：原文被分割成多个长度适中的文本块（chunks），每个文本块在语义上是相对完整的，没有从句子中间断开的情况。

-   **用例1.3：空文件处理**
    -   **前置条件**：`knowledge_base/sources` 中包含一个空文件。
    -   **操作**：运行文本处理脚本。
    -   **预期结果**：脚本能够跳过空文件，不产生任何文本块，并且不会报错。

## 2. 向量化与存储测试

-   **用例2.1：向量生成**
    -   **前置条件**：有若干处理好的文本块。
    -   **操作**：运行向量化部分的代码。
    -   **预期结果**：每个文本块都成功生成了一个符合预期维度（由所选嵌入模型决定）的向量，向量值为浮点数。

-   **用例2.2：数据存入向量数据库**
    -   **前置条件**：已生成文本块和对应的向量。
    -   **操作**：运行将数据存入向量数据库的代码。
    -   **预期结果**：向量数据库中成功创建了一个新的集合（Collection）。查询该集合，其中的条目数量与处理的文本块数量一致。

-   **用例2.3：元数据存储**
    -   **前置条件**：数据已存入向量数据库。
    -   **操作**：从数据库中随机检索一个条目。
    -   **预期结果**：除了向量，还能检索到该文本块的原文以及其元数据（如来源文件名）。

## 3. 知识库完整性测试

-   **用例3.1：端到端流程**
    -   **前置条件**：准备好源文件。
    -   **操作**：完整执行 `scripts/process_texts.py` 脚本。
    -   **预期结果**：脚本从头到尾运行无误，最终向量数据库被成功创建并填充了数据。

-   **用例3.2：重复运行的幂等性**
    -   **前置条件**：已经成功运行过一次知识库构建脚本。
    -   **操作**：再次运行该脚本。
    -   **预期结果**：脚本能够正确处理已存在的数据库，例如，可以选择覆盖或增量更新，而不会因为数据库已存在而崩溃。（具体行为取决于脚本设计）
